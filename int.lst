     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_out8
     7 00000000                                 	EXTERN	_io_in8
     8 00000000                                 	EXTERN	_sysfifo
     9 00000000                                 	EXTERN	_fifo32_put
    10 00000000                                 	EXTERN	_timerctl
    11 00000000                                 	EXTERN	_io_cli
    12 00000000                                 	EXTERN	_io_sti
    13 00000000                                 	EXTERN	_mtask_switch
    14 00000000                                 	EXTERN	_task_now
    15 00000000                                 	EXTERN	_cmd_putstr0
    16 00000000                                 	EXTERN	_sprintf
    17 00000000                                 [FILE "int.c"]
    18                                          [SECTION .text]
    19 00000000                                 	GLOBAL	_init_pic
    20 00000000                                 _init_pic:
    21 00000000 55                              	PUSH	EBP
    22 00000001 89 E5                           	MOV	EBP,ESP
    23 00000003 68 000000FF                     	PUSH	255
    24 00000008 6A 21                           	PUSH	33
    25 0000000A E8 [00000000]                   	CALL	_io_out8
    26 0000000F 68 000000FF                     	PUSH	255
    27 00000014 68 000000A1                     	PUSH	161
    28 00000019 E8 [00000000]                   	CALL	_io_out8
    29 0000001E 6A 11                           	PUSH	17
    30 00000020 6A 20                           	PUSH	32
    31 00000022 E8 [00000000]                   	CALL	_io_out8
    32 00000027 6A 20                           	PUSH	32
    33 00000029 6A 21                           	PUSH	33
    34 0000002B E8 [00000000]                   	CALL	_io_out8
    35 00000030 83 C4 20                        	ADD	ESP,32
    36 00000033 6A 04                           	PUSH	4
    37 00000035 6A 21                           	PUSH	33
    38 00000037 E8 [00000000]                   	CALL	_io_out8
    39 0000003C 6A 01                           	PUSH	1
    40 0000003E 6A 21                           	PUSH	33
    41 00000040 E8 [00000000]                   	CALL	_io_out8
    42 00000045 6A 11                           	PUSH	17
    43 00000047 68 000000A0                     	PUSH	160
    44 0000004C E8 [00000000]                   	CALL	_io_out8
    45 00000051 6A 28                           	PUSH	40
    46 00000053 68 000000A1                     	PUSH	161
    47 00000058 E8 [00000000]                   	CALL	_io_out8
    48 0000005D 83 C4 20                        	ADD	ESP,32
    49 00000060 6A 02                           	PUSH	2
    50 00000062 68 000000A1                     	PUSH	161
    51 00000067 E8 [00000000]                   	CALL	_io_out8
    52 0000006C 6A 01                           	PUSH	1
    53 0000006E 68 000000A1                     	PUSH	161
    54 00000073 E8 [00000000]                   	CALL	_io_out8
    55 00000078 68 000000FB                     	PUSH	251
    56 0000007D 6A 21                           	PUSH	33
    57 0000007F E8 [00000000]                   	CALL	_io_out8
    58 00000084 68 000000FF                     	PUSH	255
    59 00000089 68 000000A1                     	PUSH	161
    60 0000008E E8 [00000000]                   	CALL	_io_out8
    61 00000093 C9                              	LEAVE
    62 00000094 C3                              	RET
    63 00000095                                 	GLOBAL	_inthandler21
    64 00000095                                 _inthandler21:
    65 00000095 55                              	PUSH	EBP
    66 00000096 89 E5                           	MOV	EBP,ESP
    67 00000098 6A 61                           	PUSH	97
    68 0000009A 6A 20                           	PUSH	32
    69 0000009C E8 [00000000]                   	CALL	_io_out8
    70 000000A1 6A 60                           	PUSH	96
    71 000000A3 E8 [00000000]                   	CALL	_io_in8
    72 000000A8 0F B6 C0                        	MOVZX	EAX,AL
    73 000000AB 05 00000100                     	ADD	EAX,256
    74 000000B0 50                              	PUSH	EAX
    75 000000B1 68 [00000000]                   	PUSH	_sysfifo
    76 000000B6 E8 [00000000]                   	CALL	_fifo32_put
    77 000000BB C9                              	LEAVE
    78 000000BC C3                              	RET
    79 000000BD                                 	GLOBAL	_inthandler2c
    80 000000BD                                 _inthandler2c:
    81 000000BD 55                              	PUSH	EBP
    82 000000BE 89 E5                           	MOV	EBP,ESP
    83 000000C0 6A 64                           	PUSH	100
    84 000000C2 68 000000A0                     	PUSH	160
    85 000000C7 E8 [00000000]                   	CALL	_io_out8
    86 000000CC 6A 62                           	PUSH	98
    87 000000CE 6A 20                           	PUSH	32
    88 000000D0 E8 [00000000]                   	CALL	_io_out8
    89 000000D5 6A 60                           	PUSH	96
    90 000000D7 E8 [00000000]                   	CALL	_io_in8
    91 000000DC 0F B6 C0                        	MOVZX	EAX,AL
    92 000000DF 05 00000200                     	ADD	EAX,512
    93 000000E4 50                              	PUSH	EAX
    94 000000E5 68 [00000000]                   	PUSH	_sysfifo
    95 000000EA E8 [00000000]                   	CALL	_fifo32_put
    96 000000EF C9                              	LEAVE
    97 000000F0 C3                              	RET
    98 000000F1                                 	GLOBAL	_inthandler27
    99 000000F1                                 _inthandler27:
   100 000000F1 55                              	PUSH	EBP
   101 000000F2 89 E5                           	MOV	EBP,ESP
   102 000000F4 6A 67                           	PUSH	103
   103 000000F6 6A 20                           	PUSH	32
   104 000000F8 E8 [00000000]                   	CALL	_io_out8
   105 000000FD C9                              	LEAVE
   106 000000FE C3                              	RET
   107 000000FF                                 	GLOBAL	_inthandler20
   108 000000FF                                 _inthandler20:
   109 000000FF 55                              	PUSH	EBP
   110 00000100 89 E5                           	MOV	EBP,ESP
   111 00000102 53                              	PUSH	EBX
   112 00000103 6A 60                           	PUSH	96
   113 00000105 6A 20                           	PUSH	32
   114 00000107 E8 [00000000]                   	CALL	_io_out8
   115 0000010C 59                              	POP	ECX
   116 0000010D 5B                              	POP	EBX
   117 0000010E FF 05 [00000000]                	INC	DWORD [_timerctl]
   118 00000114                                 L6:
   119 00000114 E8 [00000000]                   	CALL	_io_cli
   120 00000119 8B 15 [00002714]                	MOV	EDX,DWORD [_timerctl+10004]
   121 0000011F 85 D2                           	TEST	EDX,EDX
   122 00000121 74 50                           	JE	L9
   123 00000123 A1 [00000000]                   	MOV	EAX,DWORD [_timerctl]
   124 00000128 39 02                           	CMP	DWORD [EDX],EAX
   125 0000012A 77 47                           	JA	L9
   126 0000012C 8B 42 10                        	MOV	EAX,DWORD [16+EDX]
   127 0000012F 89 D3                           	MOV	EBX,EDX
   128 00000131 A3 [00002714]                   	MOV	DWORD [_timerctl+10004],EAX
   129 00000136 8A 42 0C                        	MOV	AL,BYTE [12+EDX]
   130 00000139 3C 02                           	CMP	AL,2
   131 0000013B 74 23                           	JE	L14
   132 0000013D 0F B6 C0                        	MOVZX	EAX,AL
   133 00000140 50                              	PUSH	EAX
   134 00000141 FF 72 08                        	PUSH	DWORD [8+EDX]
   135 00000144 E8 [00000000]                   	CALL	_fifo32_put
   136 00000149 C7 43 04 00000001               	MOV	DWORD [4+EBX],1
   137 00000150 E8 [00000000]                   	CALL	_io_sti
   138 00000155 58                              	POP	EAX
   139 00000156 5A                              	POP	EDX
   140 00000157                                 L8:
   141 00000157 85 DB                           	TEST	EBX,EBX
   142 00000159 75 B9                           	JNE	L6
   143 0000015B 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   144 0000015E C9                              	LEAVE
   145 0000015F C3                              	RET
   146 00000160                                 L14:
   147 00000160 C7 42 04 00000001               	MOV	DWORD [4+EDX],1
   148 00000167 E8 [00000000]                   	CALL	_io_sti
   149 0000016C E8 [00000000]                   	CALL	_mtask_switch
   150 00000171 EB E4                           	JMP	L8
   151 00000173                                 L9:
   152 00000173 31 DB                           	XOR	EBX,EBX
   153 00000175 E8 [00000000]                   	CALL	_io_sti
   154 0000017A EB DB                           	JMP	L8
   155                                          [SECTION .data]
   156 00000000                                 LC0:
   157 00000000 0A 49 4E 54 20 30 44 20 3A 0A   	DB	0x0A,"INT 0D :",0x0A," General Protected Exception.",0x0A,0x00
       0000000A 20 47 65 6E 65 72 61 6C 20 50 
       00000014 72 6F 74 65 63 74 65 64 20 45 
       0000001E 78 63 65 70 74 69 6F 6E 2E 0A 
       00000028 00 
   158 00000029                                 LC1:
   159 00000029 45 49 50 20 3D 20 25 30 38 58   	DB	"EIP = %08X",0x0A,0x00
       00000033 0A 00 
   160                                          [SECTION .text]
   161 0000017C                                 	GLOBAL	_inthandler0d
   162 0000017C                                 _inthandler0d:
   163 0000017C 55                              	PUSH	EBP
   164 0000017D 89 E5                           	MOV	EBP,ESP
   165 0000017F 57                              	PUSH	EDI
   166 00000180 56                              	PUSH	ESI
   167 00000181 53                              	PUSH	EBX
   168 00000182 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
   169 00000185 83 EC 20                        	SUB	ESP,32
   170 00000188 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
   171 0000018E E8 [00000000]                   	CALL	_task_now
   172 00000193 68 [00000000]                   	PUSH	LC0
   173 00000198 89 C6                           	MOV	ESI,EAX
   174 0000019A 57                              	PUSH	EDI
   175 0000019B 83 C6 18                        	ADD	ESI,24
   176 0000019E E8 [00000000]                   	CALL	_cmd_putstr0
   177 000001A3 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   178 000001A6 FF 70 2C                        	PUSH	DWORD [44+EAX]
   179 000001A9 68 [00000029]                   	PUSH	LC1
   180 000001AE 53                              	PUSH	EBX
   181 000001AF E8 [00000000]                   	CALL	_sprintf
   182 000001B4 53                              	PUSH	EBX
   183 000001B5 57                              	PUSH	EDI
   184 000001B6 E8 [00000000]                   	CALL	_cmd_putstr0
   185 000001BB 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   186 000001BE 5B                              	POP	EBX
   187 000001BF 89 F0                           	MOV	EAX,ESI
   188 000001C1 5E                              	POP	ESI
   189 000001C2 5F                              	POP	EDI
   190 000001C3 5D                              	POP	EBP
   191 000001C4 C3                              	RET
   192                                          [SECTION .data]
   193 00000035                                 LC2:
   194 00000035 0A 49 4E 54 20 30 43 20 3A 0A   	DB	0x0A,"INT 0C :",0x0A," Stack Exception.",0x0A,0x00
       0000003F 20 53 74 61 63 6B 20 45 78 63 
       00000049 65 70 74 69 6F 6E 2E 0A 00 
   195                                          [SECTION .text]
   196 000001C5                                 	GLOBAL	_inthandler0c
   197 000001C5                                 _inthandler0c:
   198 000001C5 55                              	PUSH	EBP
   199 000001C6 89 E5                           	MOV	EBP,ESP
   200 000001C8 57                              	PUSH	EDI
   201 000001C9 56                              	PUSH	ESI
   202 000001CA 53                              	PUSH	EBX
   203 000001CB 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
   204 000001CE 83 EC 20                        	SUB	ESP,32
   205 000001D1 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
   206 000001D7 E8 [00000000]                   	CALL	_task_now
   207 000001DC 68 [00000035]                   	PUSH	LC2
   208 000001E1 89 C6                           	MOV	ESI,EAX
   209 000001E3 57                              	PUSH	EDI
   210 000001E4 83 C6 18                        	ADD	ESI,24
   211 000001E7 E8 [00000000]                   	CALL	_cmd_putstr0
   212 000001EC 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   213 000001EF FF 70 2C                        	PUSH	DWORD [44+EAX]
   214 000001F2 68 [00000029]                   	PUSH	LC1
   215 000001F7 53                              	PUSH	EBX
   216 000001F8 E8 [00000000]                   	CALL	_sprintf
   217 000001FD 53                              	PUSH	EBX
   218 000001FE 57                              	PUSH	EDI
   219 000001FF E8 [00000000]                   	CALL	_cmd_putstr0
   220 00000204 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   221 00000207 5B                              	POP	EBX
   222 00000208 89 F0                           	MOV	EAX,ESI
   223 0000020A 5E                              	POP	ESI
   224 0000020B 5F                              	POP	EDI
   225 0000020C 5D                              	POP	EBP
   226 0000020D C3                              	RET
